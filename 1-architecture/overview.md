# OpenClaw Architecture Overview

## Project Summary

- **Version:** 2026.2.1
- **License:** MIT
- **Runtime:** Node.js ≥22
- **Language:** TypeScript
- **Package Manager:** pnpm
- **Files:** 4891 total, 2533 TypeScript source files, 597 doc files

## What is OpenClaw?

A **personal AI assistant** that:
- Runs on your own devices (local-first)
- Connects to channels you already use (WhatsApp, Telegram, Discord, Slack, Signal, iMessage, etc.)
- Acts as control plane for AI interactions
- Supports voice, canvas rendering, and multi-modal interactions

## Repository Structure

```
openclaw/
├── src/              # Core source code (2533 .ts files)
├── docs/             # Documentation (597 .md files)
├── apps/             # Native apps (macOS, iOS, Android)
├── packages/         # Shared packages
├── extensions/       # Channel plugins & extensions
├── skills/           # Built-in skills
├── ui/               # Web UI (Canvas)
├── scripts/          # Build & utility scripts
├── test/             # Test files
└── vendor/           # Third-party code
```

## Core Modules (src/)

### Messaging & Channels
| Module | Purpose |
|--------|---------|
| `channels/` | Channel abstraction layer |
| `whatsapp/` | WhatsApp via Baileys |
| `telegram/` | Telegram via grammY |
| `discord/` | Discord via @buape/carbon |
| `slack/` | Slack via @slack/bolt |
| `signal/` | Signal messaging |
| `imessage/` | iMessage (macOS) |
| `line/` | LINE messaging |

### AI & Agent
| Module | Purpose |
|--------|---------|
| `agents/` | Agent orchestration |
| `providers/` | LLM provider integrations |
| `sessions/` | Session management |
| `memory/` | Conversation memory |
| `routing/` | Message routing |

### Infrastructure
| Module | Purpose |
|--------|---------|
| `gateway/` | Gateway server (control plane) |
| `cli/` | Command-line interface |
| `commands/` | CLI commands |
| `config/` | Configuration management |
| `daemon/` | Background service |
| `cron/` | Scheduled tasks |

### Features
| Module | Purpose |
|--------|---------|
| `browser/` | Browser automation (Playwright) |
| `canvas-host/` | Canvas rendering |
| `tts/` | Text-to-speech |
| `media/` | Media handling |
| `media-understanding/` | Vision/audio analysis |
| `link-understanding/` | URL content extraction |

### Security & Utils
| Module | Purpose |
|--------|---------|
| `security/` | Security features |
| `logging/` | Logging system |
| `utils/` | Utility functions |
| `types/` | TypeScript types |

## Key Dependencies

### AI/LLM
- `@mariozechner/pi-agent-core` - Agent runtime
- `@mariozechner/pi-ai` - AI utilities
- `@mariozechner/pi-coding-agent` - Coding agent

### Messaging
- `@whiskeysockets/baileys` - WhatsApp Web API
- `grammy` - Telegram Bot API
- `@buape/carbon` - Discord
- `@slack/bolt` - Slack

### Infrastructure
- `express` / `hono` - HTTP servers
- `sqlite-vec` - Vector database
- `playwright-core` - Browser automation
- `sharp` - Image processing

## Architecture Pattern

```
                    ┌─────────────┐
                    │   Gateway   │ (Control Plane)
                    │  :18789     │
                    └──────┬──────┘
                           │
           ┌───────────────┼───────────────┐
           │               │               │
    ┌──────▼──────┐ ┌──────▼──────┐ ┌──────▼──────┐
    │  WhatsApp   │ │  Telegram   │ │  Discord    │
    │  Channel    │ │  Channel    │ │  Channel    │
    └──────┬──────┘ └──────┬──────┘ └──────┬──────┘
           │               │               │
           └───────────────┼───────────────┘
                           │
                    ┌──────▼──────┐
                    │   Agent     │
                    │  (Claude)   │
                    └──────┬──────┘
                           │
           ┌───────────────┼───────────────┐
           │               │               │
    ┌──────▼──────┐ ┌──────▼──────┐ ┌──────▼──────┐
    │   Memory    │ │   Tools     │ │   Skills    │
    └─────────────┘ └─────────────┘ └─────────────┘
```

## Entry Points

1. **CLI:** `openclaw.mjs` → `src/cli/`
2. **Gateway:** `src/gateway/`
3. **Agent:** `src/agents/`

## Build System

- **tsdown** - TypeScript bundler
- **rolldown** - Rollup-compatible bundler
- **vitest** - Testing framework
- **oxlint** - Linter
- **oxfmt** - Formatter

---

*Generated by Blaq for OpenClaw analysis project*
*Last updated: 2026-02-04*
